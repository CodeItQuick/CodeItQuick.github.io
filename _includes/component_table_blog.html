<div x-data="{ pageNumber: 0, tag_filter: 'all', tag_count: 17 }" class="bg-neutral">
    <div class="w-full py-8 mx-auto md:p-8 md:flex w-full">
        <div class="hidden md:w-1/4 md:flex md:flex-col items-center">
            <div class="flex flex-col">
                <h1 class="text-3xl">Posts</h1>
                {% for post in site.posts %}
                {% assign currentdate = post.date | date: "%B %Y" %}
                {% if currentdate != date %}
                {% unless forloop.first %}</ul>{% endunless %}
                <h1 class="text-xl" id="y{{post.date | date: "%B %Y"}}">{{ currentdate }}</h1>
                <ul>
                    {% assign date = currentdate %}
                    {% endif %}
                    <li><a href="{{ post.url }}" class="hover:text-primary">{{ post.title }}</a></li>
                    {% if forloop.last %}</ul>{% endif %}
                {% endfor %}
            </div>
        </div>
        <div x-data="{ index: 0 }" class="w-full md:w-3/4 grid gap-6 md:gap-16 grid-cols-1">
             {% for tag in site.tags %}
                     {% assign currentIndex = 0 %}
                     {% for row in tag[1] %}
                                <div x-show="'{{ tag[0] }}'.includes(tag_filter)"
                                     :class="{ 'hidden' : +'{{ currentIndex }}' < (pageNumber) * 3 || +'{{ currentIndex }}' > (pageNumber + 1) * 3 - 1 }"
                                >
                                   {% include component_list_higher_order.html
                                        image=row.image
                                        title=row.name
                                        description=row.description
                                        tags=row.tags
                                        tag_size=row.tags.size
                                  %}
                                </div>
                       {% assign currentIndex = currentIndex | plus: 1 %}
                    {% endfor %}
             {% endfor %}
        </div>
        <div class="hidden md:w-1/4 md:flex md:flex-col items-center">
            <h1 class="text-xl">Tags</h1>
            <div class="w-fit md:grid md:gap-4 md:grid-cols-1" >
                {% for tag in site.tags %}
                <button class="btn " :class="tag_filter === '{{ tag[0] }}' ?
                    'btn btn-primary' : 'btn-base-200' "
                        x-on:click="tag_filter = '{{ tag[0]}}'; tag_count = {{ tag[1].size }}; pageNumber = 0;">
                    {{ tag[0] }}
                </button>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
